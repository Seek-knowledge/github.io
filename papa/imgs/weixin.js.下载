
// alert(1);
var weixin={
	config:function(){
		var url=window.location.href.split("#")[0];
		// alert(2);
//		alert(url);

// 		$.ajax({
// 			type:'get',
// 			// dataType:'json',
// 			data:{url:url},
// 			url:'http://wechat.palm-h.com/h5/papa/jssdk/jssdk.php',success:function(s){
// //			alert(1);
// 			var s=eval("("+s+")");
// //			alert(s.signature);
// 			wx.config({
// 				 debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
// 				 appId: s.appId, // 必填，公众号的唯一标识
// 				 timestamp: s.timestamp, // 必填，生成签名的时间戳
// 				 nonceStr: s.nonceStr, // 必填，生成签名的随机串
// 				 signature: s.signature,// 必填，签名，见附录1
// 				 jsApiList: ['onMenuShareTimeline','onMenuShareAppMessage'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
// 			});
// 		}})

		$.get("http://wechat.palm-h.com/h5/papa/jssdk/jssdk.php",{"url":url},function(s){
//			alert(1);
			var s=eval("("+s+")");
//			alert(s.signature);
			wx.config({
				 debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
				 appId: s.appId, // 必填，公众号的唯一标识
				 timestamp: s.timestamp, // 必填，生成签名的时间戳
				 nonceStr: s.nonceStr, // 必填，生成签名的随机串
				 signature: s.signature,// 必填，签名，见附录1
				 jsApiList: ['onMenuShareTimeline','onMenuShareAppMessage'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
			});
		})
	},
	share:function(desc,urll){
//		alert(title);
		var data={
			   	title: "啪仙拜年 啪运连连", // 分享标题
			    link: 'http://wechat.palm-h.com/h5/papa/', // 分享链接
			    imgUrl: urll, // 分享图标
			    desc: desc, // 分享描述,
			    success:function(){
			    	TDAPP.onEvent("分享统计");
			    	//分享成功
			    	//alert(page);
//					share();
			    },
			    cancel:function(){}
		};
 		wx.onMenuShareTimeline({
		    title: data.desc, // 分享标题
		    link: data.link, // 分享链接
		    imgUrl: data.imgUrl, // 分享图标
		    success: data.success,
		    cancel: data.cancel
		});
		wx.onMenuShareAppMessage({
		    title: data.desc, // 分享标题
		    desc: data.desc, // 分享描述
		    link: data.link, // 分享链接
		    imgUrl: data.imgUrl, // 分享图标
		    type: '', // 分享类型,music、video或link，不填默认为link
		    dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
		    success: data.success,
		    cancel: data.cancel
		});
	}
}
// $(function(){

// })
// $(window).load(function(){
//	alert(1)

	weixin.config();
	
	wx.ready(function(){
//		alert(2)
		weixin.share('啪仙拜年，2016你是什么啪啪运？','http://wechat.palm-h.com/h5/papa/jssdk/logo.jpg');
	});
	//点击量
//	 $("#activityClick").on("click", function () {
//          $.ajax({
//              //url: "http://localhost:3404/hwb/webservices/webserviceswst.ashx?action=UpdateActivityClicks",
//              url:"http://www.wst-media.com/platform/hwb/webservices/webserviceswst.ashx?action=UpdateActivityClicks",
//              data: {
//                  activityID: "9",
//					openid:""
//              },
//              type: "post",
//              dataType: "json",
//              success: function (data) {
//                  if (data.result == "1") {
//                      alert(data.msg);
//                  } else {
//                      alert(data.msg);
//                  }
//              },
//              error: function (XMLHttpRequest, textStatus, errorThrown) {
//                  alert(XMLHttpRequest.status);
//                  alert(XMLHttpRequest.readyState);
//                  alert(textStatus);
//              }
//          })
//      });
		//参与量
//      $("#activityJoin").on("click", function () {
	
//          $.ajax({
//              //url: "http://localhost:3404/hwb/webservices/webserviceswst.ashx?action=SaveActivityJoinLog",
//              url:"http://www.wst-media.com/platform/hwb/webservices/webserviceswst.ashx?action=SaveActivityJoinLog",
//              data: {
//                  activityID: "9",
//                  openid: ""
//              },
//              type: "post",
//              dataType: "json",
//              success: function (data) {
//              	if (data.result == "1") {
//                      alert(data.msg);
//                  } else {
//                      alert(data.msg);
//                  }
//              },
//              error: function (XMLHttpRequest, textStatus, errorThrown) {
//                  alert(XMLHttpRequest.status);
//                  alert(XMLHttpRequest.readyState);
//                  alert(textStatus);
//              }
//          })
//      });


 
// })
